var define=void 0!==define?define:function e(t,n,r){e.clazzes=e.clazzes||{},r.apply(null,n.map(()=>e.clazzes))},__extends=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();define("launch-error-strategy.type",["require","exports"],function(e,t){"use strict";t.__esModule=!0}),define("config/calc-config",["require","exports"],function(e,t){"use strict";t.__esModule=!0}),define("config/config.service",["require","exports"],function(e,t){"use strict";t.__esModule=!0;var n=function(){function e(){}return e.getInstance=function(){return this.instance||(this.instance=new e),this.instance},e.configure=function(e){this.defaultConfig=this.getInstance().mergeConfigs(this.defaultConfig,e)},e.prototype.mergeConfigs=function(e,t){var n=JSON.parse(JSON.stringify(e));return t?(void 0!==t.thrownStrategy&&(n.thrownStrategy=t.thrownStrategy),void 0!==t.throwNaN&&(n.throwNaN=t.throwNaN),void 0!==t.throwInfinite&&(n.throwInfinite=t.throwInfinite),void 0!==t.throwUnsafeNumber&&(n.throwUnsafeNumber=t.throwUnsafeNumber),n):n},e.prototype.createConfigs=function(t){return this.mergeConfigs(e.defaultConfig,t)},e.instance=null,e.defaultConfig={thrownStrategy:"emit-event",throwNaN:!0,throwInfinite:!0,throwUnsafeNumber:!0},e}();t.ConfigService=n}),define("domain/operator.type",["require","exports"],function(e,t){"use strict";t.__esModule=!0}),define("domain/operation.model",["require","exports"],function(e,t){"use strict";t.__esModule=!0}),define("domain/equation.model",["require","exports"],function(e,t){"use strict";t.__esModule=!0}),define("validator/equation.stringify",["require","exports"],function(e,t){"use strict";t.__esModule=!0,t.equationStringify=function(e){for(var t,n=String(e.baseNumber),r=[].concat(e.operations);t=r.shift();)n="function"==typeof t?"("+n+" "+t.name+"(n) => n)":"("+n+" "+t.type+" "+t.value+")";return n}}),define("validator/number.validator",["require","exports","config/config.service","validator/equation.stringify"],function(e,t,n,r){"use strict";t.__esModule=!0;var i=function(){function e(){}return e.getInstance=function(){return this.instance||(this.instance=new e),this.instance},e.prototype.validate=function(e,t,n,r){var i=this.validateSingleNumber(e,void 0,r);return i?this.generateErrorMessage(e,t,n,i):null},e.prototype.validateSingleNumber=function(e,t,r){var i=n.ConfigService.getInstance().createConfigs(r);if(i.throwNaN){var o=this.checkNaN(e);if(o)return this.joinMessages(o,t)}if(i.throwInfinite){var u=this.checkInfinite(e);if(u)return this.joinMessages(u,t)}if(i.throwUnsafeNumber){var a=this.checkUnsafeNumber(e);if(a)return this.joinMessages(a,t)}return null},e.prototype.joinMessages=function(e,t){return t?t+"\n"+e:e},e.prototype.generateErrorMessage=function(e,t,n,i){var o=r.equationStringify(n);return t?t.operations.length===n.operations.length?"Invalid result value in equation "+o+", "+i:"Invalid result value in "+r.equationStringify(t)+" in equation "+o+", "+i:"Invalid value "+e+" in equation "+o+", "+i},e.prototype.checkNaN=function(e){return isNaN(e)?"NaN was found":null},e.prototype.checkInfinite=function(e){return Number.isFinite(e)?null:"infinite value was found"},e.prototype.checkUnsafeNumber=function(e){return!!String(e).split(".").find(function(e){return!Number.isSafeInteger(Number(e))})?e+" is not a secure number":null},e.instance=null,e}();t.NumberValidator=i}),define("error/calc-error",["require","exports"],function(e,t){"use strict";t.__esModule=!0;var n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(Error);t.CalcError=n}),define("error/error.service",["require","exports","error/calc-error"],function(e,t,n){"use strict";t.__esModule=!0;var r=function(){function e(){this.errorEventEmitter=null}return e.getInstance=function(){return this.instance||(this.instance=new e),this.instance},e.prototype.onError=function(e){this.errorEventEmitter=e},e.prototype.emitError=function(e,t){var r=new n.CalcError(t);if("emit-event"===e.thrownStrategy&&this.errorEventEmitter)this.errorEventEmitter(r);else{if("console"!==e.thrownStrategy)throw r;console.error(r)}},e.instance=null,e}();t.ErrorService=r}),define("calculate/divide",["require","exports"],function(e,t){"use strict";t.__esModule=!0,t.divide=function(e,t){for(var n=String(e/t).replace(/\d+\.?/,"").length,r="1";n--;)r+="0";return r=Number(r),(e=Math.round(e*r))/t/r}}),define("calculate/minus",["require","exports"],function(e,t){"use strict";t.__esModule=!0,t.minus=function(e,t){if(e%1==0&&t%1==0)return e-t;for(var n=String(e).replace(/\d+\.?/,"").length,r=String(t).replace(/\d+\.?/,"").length,i=n>r?n:r,o="1";i--;)o+="0";return o=Number(o),((e=Math.round(e*o))-(t=Math.round(t*o)))/o}}),define("calculate/multiply",["require","exports"],function(e,t){"use strict";t.__esModule=!0,t.multiply=function(e,t){if(e%1==0&&t%1==0)return e*t;var n,r,i=1,o=1;if(e%1!=0){for(n=String(e).replace(/\d+\.?/,"").length;n--;)i+="0";i=Number(i)}if(t%1!=0){for(r=String(t).replace(/\d+\.?/,"").length;r--;)o+="0";o=Number(o)}return(e=Math.round(e*i))*(t=Math.round(t*o))/(i*o)}}),define("calculate/sum",["require","exports"],function(e,t){"use strict";t.__esModule=!0,t.sum=function(e,t){if(e%1==0&&t%1==0)return e+t;for(var n=String(e).replace(/\d+\.?/,"").length,r=String(t).replace(/\d+\.?/,"").length,i=n>r?n:r,o="1";i--;)o+="0";return o=Number(o),((e=Math.round(e*o))+(t=Math.round(t*o)))/o}}),define("calculate/calc-build",["require","exports","config/config.service","validator/number.validator","error/error.service","calculate/divide","calculate/minus","calculate/multiply","calculate/sum"],function(e,t,n,r,i,o,u,a,s){"use strict";t.__esModule=!0;var c=function(){function e(){this.numberValidator=r.NumberValidator.getInstance(),this.errorService=i.ErrorService.getInstance()}return e.getInstance=function(){return this.instance||(this.instance=new e),this.instance},e.configure=function(e){n.ConfigService.configure(e)},e.prototype.calculate=function(t,n){this.validateEquation(t,n);for(var r,i=this.createExecutedEquation(t),o=[].concat(t.operations),u=t.baseNumber;r=o.shift();)u="function"==typeof r?r(u):e.calcMap[r.type](u,r.value),i.operations.push(r),this.validate(u,i,t,n);return u},e.prototype.createExecutedEquation=function(e){return{baseNumber:e.baseNumber,operations:[]}},e.prototype.validate=function(e,t,n,r){var i=this.numberValidator.validate(e,t,n,r);i&&this.errorService.emitError(r,i)},e.prototype.validateEquation=function(e,t){var n=this;this.validate(e.baseNumber,null,e,t),e.operations.forEach(function(r){"function"!=typeof r&&n.validate(r.value,null,e,t)})},e.instance=null,e.calcMap={"+":s.sum,"-":u.minus,"/":o.divide,"*":a.multiply},e}();t.CalcBuild=c}),define("equation.type-guard",["require","exports"],function(e,t){"use strict";t.__esModule=!0,t.equationTypeGuard=function(e){return!!e[0]}}),define("calc",["require","exports","calculate/calc-build","config/config.service","equation.type-guard","error/error.service","validator/number.validator"],function(e,t,n,r,i,o,u){"use strict";t.__esModule=!0;var a=function(){function e(e,t){this.baseNumber=e,this.calcBuild=n.CalcBuild.getInstance(),this.configService=r.ConfigService.getInstance(),this.operations=[],this.customConfig=r.ConfigService.defaultConfig,this.customConfig=this.configService.createConfigs(t)}return e.checkNumber=function(e,t,n){var i=u.NumberValidator.getInstance().validateSingleNumber(e,t,n);if(i){var a=r.ConfigService.getInstance().createConfigs(n);return o.ErrorService.getInstance().emitError(a,i),!1}return!0},e.onError=function(e){o.ErrorService.getInstance().onError(e)},e.configure=function(e){r.ConfigService.getInstance().createConfigs(e)},e.sum=function(t,n,r){return new e(t,r).sum(n).finish()},e.minus=function(t,n,r){return new e(t,r).minus(n).finish()},e.divide=function(t,n,r){return new e(t,r).divide(n).finish()},e.multiply=function(t,n,r){return new e(t,r).multiply(n).finish()},e.prototype.sum=function(e){return this.operations.push({type:"+",value:e}),this},e.prototype.minus=function(e){return this.operations.push({type:"-",value:e}),this},e.prototype.divide=function(e){return this.operations.push({type:"/",value:e}),this},e.prototype.multiply=function(e){return this.operations.push({type:"*",value:e}),this},e.prototype.pipe=function(e){return this.operations.push(e),this},e.prototype.finish=function(){var e=this.operations,t=this.baseNumber;return i.equationTypeGuard(e)?this.calcBuild.calculate({baseNumber:t,operations:e},this.customConfig):t},e}();t.Calc=a}),define("index",["require","exports","calc","error/calc-error"],function(e,t,n,r){"use strict";function i(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}t.__esModule=!0,i(n),i(r)}),define.clazzes&&("undefined"!=typeof window&&(window.Calc=define.clazzes.Calc,window.CalcError=define.clazzes.CalcError),"undefined"!=typeof module&&"exports"in module&&(module.exports=define.clazzes),"undefined"!=typeof exports&&(exports=define.clazzes));